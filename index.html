<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <title>CHN 213 èµ›åšç®—å‘½</title>
    <style>
      body {
        font-family: sans-serif;
        background-color: #f6f6f6;
        padding: 30px;
        max-width: 600px;
        margin: auto;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      }

      h2,
      h3 {
        text-align: center;
      }

      .input-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 20px;
      }

      .input-group input {
        padding: 12px;
        font-size: 16px;
        width: 100%;
        border: 1px solid #ccc;
        border-radius: 6px;
        box-sizing: border-box;
      }

      button {
        padding: 12px;
        font-size: 16px;
        width: 100%;
        margin-top: 16px;
        border: none;
        border-radius: 6px;
        background-color: #d7000f;
        color: white;
        cursor: pointer;
      }

      button:hover {
        background-color: #b5000c;
      }

      #loading {
        text-align: center;
        margin-top: 20px;
      }

      .spinner {
        margin: 10px auto;
        border: 6px solid #f3f3f3;
        border-top: 6px solid #d7000f;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      #loading-img {
        width: 100px;
        margin-top: 10px;
      }

      #fortuneLine {
        font-style: italic;
        color: #444;
        margin-top: 12px;
        opacity: 1;
        transition: opacity 0.5s ease;
      }

      #result {
        opacity: 0;
        transition: opacity 0.8s ease-in;
        margin-top: 20px;
        background-color: white;
        padding: 15px;
        border-radius: 6px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        white-space: pre-wrap;
      }

      #result.visible {
        opacity: 1;
      }

      footer {
        margin-top: 40px;
        padding: 15px;
        text-align: center;
        font-size: 14px;
        color: #777;
        border-top: 1px solid #ddd;
      }
    </style>
  </head>
  <body>
    <h2>ğŸ§§ CHN 213 èµ›åšç®—å‘½ Fortune.exe ğŸ§§</h2>
    <h3>è¾“å…¥ä½ çš„ç”Ÿæ—¥å’Œæ—¶é—´ï¼Œè·å–2025å¹´ï¼ˆè›‡å¹´ï¼‰çš„é£æ°´å…«å­—å»ºè®®</h3>

    <div class="input-group">
      <input type="date" id="birthdate" />
      <input type="time" id="birthtime" value="00:00" />
    </div>

    <button onclick="getFortune()">ç”Ÿæˆå»ºè®® Generate Fortune</button>

    <div id="loading" style="display: none">
      <div class="spinner"></div>
      <p id="fortuneLine"></p>
    </div>

    <div id="result"></div>

    <footer>
      âš ï¸ æœ¬ç¨‹åºä»…ä¾› CHN 213 ä½œä¸šå‚è€ƒï¼Œé£æ°´å…«å­—åˆ†æç»“æœä¸åº”ä½œä¸ºä»»ä½•å®é™…å†³ç­–ä¾æ®ã€‚
    </footer>

    <script>
      const fortunes = [
        "ğŸŒ¿ ä¸€å‘½äºŒè¿ä¸‰é£æ°´ï¼Œå¤©æ—¶åœ°åˆ©äººå’Œä¿±å…¨ã€‚",
        "ğŸ”¥ äº”è¡Œçš†æ—ºï¼Œç™¾äº‹å¯å›¾ã€‚",
        "ğŸ’§ æ°´ç”Ÿä¸‡ç‰©ï¼Œé™åˆ™ç”Ÿæ…§ã€‚",
        "âš”ï¸ é‡‘æ—ºåˆ™æ€æ¸…ï¼ŒåœŸæ—ºåˆ™å¿ƒç¨³ã€‚",
        "ğŸ“œ è¿æ¥æ—¶ä¸éœ€æ€¥ï¼Œè¿èµ°æ—¶è«å¼ºæ±‚ã€‚",
        "ğŸ§  é£æ°´æœ€æ—©ç”¨äºé€‰å¢“åœ°ï¼Œåè¢«å»¶ä¼¸åˆ°ä½å®…å¸ƒå±€ã€‚",
        "ğŸ‰ å…«å­—å°±åƒå®‡å®™ç»™ä½ çš„å‡ºç”Ÿå¯†ç ã€‚",
        "ğŸ˜´ ç¡è§‰å¤´æœåŒ—ï¼Œæ®è¯´èƒ½é¡ºåº”åœ°ç£åœºï¼Œç¡å¾—æ›´é¦™ï¼Ÿ",
        "ğŸ›ï¸ åºŠåˆ«é çª—ï¼Œä¸ç„¶çˆ±æƒ…å’Œé’±åŒ…éƒ½å¯èƒ½ç¿»çª—è·‘äº†ã€‚",
        "ğŸš½ å«ç”Ÿé—´åœ¨è´¢ä½ï¼Ÿæ­å–œä½ ï¼Œé’±è´¢å†²æ°´è€Œå»ã€‚",
        "ğŸ“± åˆ«åœ¨å•æ‰€åˆ·æ‰‹æœºï¼Œè¿æ°”éƒ½å¡åœ¨é©¬æ¡¶é‡Œäº†ã€‚",
        "ğŸ± çŒ«å–œæ¬¢å¾…çš„åœ°æ–¹ï¼Œå¾€å¾€æ˜¯æ°”åœºæœ€æ—ºçš„åœ°æ–¹ã€‚",
        "ğŸ¢ é¾Ÿå…»å®¶ä¸­å‘å¤–çœ‹ï¼Œæ®è¯´å®ˆè´¢èƒ½åŠ›+100ã€‚",
        "ğŸ’¸ å…«å­—å¼±æ°´ï¼Œé’±åŒ…å¸¸å¸¸ä¹Ÿæ°´ï¼ˆç©ºï¼‰äº†ã€‚",
        "ğŸ“ æœ¨å¤ªå°‘ï¼Ÿéš¾æ€ªä½ æœ€è¿‘å­¦ä¸è¿›å»ã€‚",
        "ğŸ“¦ æ‚ç‰©å¤ªå¤šï¼Œæ°”åœºå µå¡ï¼Œè„‘è¢‹ä¹Ÿå®¹æ˜“ä¹±ç³Ÿç³Ÿã€‚",
        "ğŸ  é—¨å¯¹çª—ï¼Œé£æ°´å«â€˜å‰è¿›åå‡ºâ€™ï¼ŒåŠªåŠ›å…¨ç™½å¹²ï½",
        "ğŸ“… å…«å­—ä¸æ˜¯ç®—å‘½ï¼Œæ˜¯çœ‹ä½ é€‚åˆä»€ä¹ˆæ ·çš„ç”Ÿæ´»èŠ‚å¥ã€‚",
        "ğŸ§§ åˆ«å¤ªè®¤çœŸï¼Œè¿™åªæ˜¯å¨±ä¹å…«å­—åŠ©æ‰‹ï¼Œæˆ‘ä»¬ä¸æ”¶çº¢åŒ…ã€‚",
        "ğŸŒ¿ Destiny is one part fate, two parts timing, and three parts Feng Shui.",
        "ğŸ”¥ When your five elements align, even Monday feels lucky.",
        "ğŸ’§ Water nourishes life â€” and sometimes drowns your motivation.",
        "âš”ï¸ Too much Metal? You may overthink everything. Breathe.",
        "ğŸ“œ Don't chase fortune. Let it flow like wind and water.",
        "ğŸ§  Feng Shui started with tombs â€” now itâ€™s just better real estate advice.",
        "ğŸ‰ Your Bazi is your cosmic birth code. Hack it wisely.",
        "ğŸ˜´ Sleep facing north â€” your dreams may align with the magnetic field.",
        "ğŸ›ï¸ Bed against the window? Bye love life. Bye savings.",
        "ğŸš½ Toilet in your wealth corner? Guess where your money is going.",
        "ğŸ“± Scrolling in the bathroom? Thatâ€™s your luck spiraling down the drain.",
        "ğŸ± Cats nap where Qi flows best. Learn from the masters.",
        "ğŸ¢ A turtle facing the door guards your fortune. No joke.",
        "ğŸ’¸ Weak Water element? Financial â€˜fluidityâ€™ hits hard.",
        "ğŸ“ Not feeling productive? Your Wood element might need a boost.",
        "ğŸ“¦ Clutter = blocked Qi = mental lag. Time to declutter your destiny.",
        "ğŸ  Door directly facing window? Thatâ€™s energy entering and instantly escaping.",
        "ğŸ“… Bazi isn't fortune-telling â€” it's decoding your rhythm of life.",
        "ğŸ§§ Don't take this too seriously. This is Cyber Divination, not divine intervention.",
        "ğŸŒŒ Even the stars think you're a work in progress. Embrace it.",
      ];

      let fortuneIndex = 0;
      let fortuneTimer;

      window.addEventListener("DOMContentLoaded", () => {
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("birthdate").setAttribute("max", today);
      });

      function startFortuneLoading() {
        const line = document.getElementById("fortuneLine");
        fortuneIndex = Math.floor(Math.random() * fortunes.length);
        line.innerText = fortunes[fortuneIndex];

        fortuneTimer = setInterval(() => {
          line.style.opacity = 0;
          setTimeout(() => {
            fortuneIndex = (fortuneIndex + 1) % fortunes.length;
            line.innerText = fortunes[fortuneIndex];
            line.style.opacity = 1;
          }, 300);
        }, 2500);
      }

      function stopFortuneLoading() {
        clearInterval(fortuneTimer);
      }

      async function getFortune() {
        const date = document.getElementById("birthdate").value;
        const time = document.getElementById("birthtime").value;
        const resultDiv = document.getElementById("result");
        const loading = document.getElementById("loading");

        if (!date || !time) {
          resultDiv.innerText = "âš ï¸ è¯·è¾“å…¥ä½ çš„å‡ºç”Ÿæ—¥æœŸå’Œæ—¶é—´ã€‚";
          resultDiv.classList.remove("visible");
          return;
        }

        resultDiv.innerText = "";
        resultDiv.classList.remove("visible");
        loading.style.display = "block";
        startFortuneLoading();

        try {
          const response = await fetch(
            "https://cool-snow-9807.kennethlee0502.workers.dev",
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ birthdate: date, birthtime: time }),
            }
          );

          const data = await response.json();
          const message =
            data.choices?.[0]?.message?.content ||
            "âŒ æ— æ³•ç”Ÿæˆå»ºè®®ï¼Œè¯·ç¨åå†è¯•ã€‚";

          resultDiv.innerText = message;
          resultDiv.classList.add("visible");
        } catch (error) {
          resultDiv.innerText = "âŒ è¯·æ±‚å‡ºé”™ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–API Keyã€‚";
          resultDiv.classList.add("visible");
        } finally {
          stopFortuneLoading();
          loading.style.display = "none";
        }
      }
    </script>
  </body>
</html>
